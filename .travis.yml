language: node_js
node_js:
  - 9
  - 8
  - 7
script: echo "Running tests against $(node -v) ..."



jobs:
 include:
    - stage: unit tests
    - script: echo "Running unit tests (1)"
    - stage: unit tests
    - script: echo "Running unit tests (2)"

    - stage: GitHub Release
      script: echo "Deploying to GitHub releases ..."
      deploy:
        provider: releases
        api_key: $GITHUB_API_KEY
        skip_cleanup: true
        on:
          tags: true  
    - stage: npm release
      node_js: "7"
      script: echo "Deploying to npm ..."
      deploy:
        provider: npm
        api_key: $NPM_API_KEY
      email: "Charles.Heath.Berman@gmail.com"
        on: deploy-npm-release
